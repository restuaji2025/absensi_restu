<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Absensi Karyawan</title>
    <script>
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(position => {
                    document.getElementById("latitude").value = position.coords.latitude;
                    document.getElementById("longitude").value = position.coords.longitude;
                });
            } else {
                alert("Geolocation tidak didukung oleh browser ini.");
            }
        }
        
        function updateTime() {
            let now = new Date();
            document.getElementById("tanggal").value = now.toISOString().split('T')[0];
            document.getElementById("waktu").value = now.toTimeString().split(' ')[0];
        }
        
        function submitForm() {
            let formData = new FormData(document.getElementById("absenForm"));
            fetch('YOUR_WEB_APP_URL', {
                method: 'POST',
                body: new URLSearchParams(formData)
            }).then(response => response.text())
            .then(data => alert("Data berhasil dikirim!"))
            .catch(error => alert("Terjadi kesalahan: " + error));
        }
        
        function previewImage(event) {
            let reader = new FileReader();
            reader.onload = function() {
                let output = document.getElementById('selfiePreview');
                output.src = reader.result;
                document.getElementById("selfieData").value = reader.result;
            }
            reader.readAsDataURL(event.target.files[0]);
        }
    </script>
</head>
<body onload="getLocation(); updateTime();">
    <h2>Absensi Karyawan</h2>
    <form id="absenForm">
        <label>Nama:</label>
        <select name="nama">
            <option>Staf 1</option>
            <option>Staf 2</option>
        </select><br>
        
        <label>Divisi:</label>
        <select name="divisi">
            <option>HRD</option>
            <option>IT</option>
        </select><br>
        
        <label>Check-in / Check-out:</label>
        <select name="status">
            <option>Check-in</option>
            <option>Check-out</option>
        </select><br>
        
        <label>Tanggal:</label>
        <input type="text" id="tanggal" name="tanggal" readonly><br>
        
        <label>Waktu:</label>
        <input type="text" id="waktu" name="waktu" readonly><br>
        
        <label>Latitude:</label>
        <input type="text" id="latitude" name="latitude" readonly><br>
        
        <label>Longitude:</label>
        <input type="text" id="longitude" name="longitude" readonly><br>
        
        <label>Ambil Selfie:</label>
        <input type="file" accept="image/*" capture="user" onchange="previewImage(event)"><br>
        <img id="selfiePreview" src="#" alt="Selfie Preview" width="150"><br>
        <input type="hidden" id="selfieData" name="selfieData">
        
        <button type="button" onclick="submitForm()">Submit</button>
    </form>
</body>
</html>
